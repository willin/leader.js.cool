__NUXT_JSONP__("/mind/thinking/shit", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return {data:[{document:{slug:"shit",description:"",title:"忽略细节，就是屎",position:3301,category:"思想篇-思维模式",toc:[{id:l,depth:q,text:l},{id:r,depth:m,text:s},{id:t,depth:m,text:u},{id:v,depth:m,text:w},{id:x,depth:m,text:y},{id:n,depth:q,text:n}],body:{type:"root",children:[{type:b,tag:d,props:{},children:[{type:a,value:"比如登录表单，输入密码后按回车键一点反应都没有，必须点击登录按钮才能登录。"}]},{type:a,value:c},{type:b,tag:z,props:{id:l},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#%E5%BC%80%E5%8F%91%E5%BF%BD%E7%95%A5%E7%BB%86%E8%8A%82%EF%BC%8C%E4%BB%A3%E7%A0%81%E4%B8%80%E5%9D%A8%E5%B1%8E%EF%BC%9B%E8%AE%BE%E8%AE%A1%E5%BF%BD%E7%95%A5%E7%BB%86%E8%8A%82%EF%BC%8C%E4%BA%A7%E5%93%81%E4%B8%80%E5%9D%A8%E5%B1%8E%E3%80%82",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:l}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"举个稍微复杂点的例子，"},{type:b,tag:"code",props:{},children:[{type:a,value:"消息列表"}]},{type:a,value:"这个功能模块。"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"假设有两个需求："}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"允许用户下拉操作刷新（手动）"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"每隔 15s 后台请求刷新（自动）"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如果处理不当，会出现漏消息、消息重复等情况。"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"所有开发环节出现的屎，都能追溯到设计环节。从设计环节就需要考虑好如何规避这些问题的发生。"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"实践："}]},{type:a,value:c},{type:b,tag:o,props:{id:r},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#0-%E6%B6%88%E6%81%AF%E8%A1%A8%E8%AF%B4%E6%98%8E",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"在数据库设计章节提到了避免使用自增 id。"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"所以就不能将消息 id 作为参数传递去查询，而采用时间戳的方式。"}]},{type:a,value:c},{type:b,tag:o,props:{id:t},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#1-%E5%8F%82%E6%95%B0%E5%B8%A6%E5%85%A5%E6%97%B6%E9%97%B4%E6%88%B3",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:u}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"时间戳的选取："}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"本次请求发起的时间 -\u003E 下次请求可能会重复本次请求处理期间的消息"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"本次请求结束的时间 -\u003E 下次请求可能会丢失本次请求处理期间的消息"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"最后一条消息记录的时间 -\u003E 完美衔接，最佳选择"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:o,props:{id:v},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#2-%E9%98%BB%E6%AD%A2%E8%AF%B7%E6%B1%82",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:w}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如用户狂点导致的频繁刷新，或者用户手动刷新和自动刷新同时进行，都会导致获得到重复消息数据。"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"先进先出。前一条请求处理完成前，阻止下一条请求。"}]},{type:a,value:c},{type:b,tag:o,props:{id:x},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#3-%E6%97%B6%E9%97%B4%E6%88%B3%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:y}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果返回的结果有数据，时间戳应当被更新替换掉"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果返回的结果没有数据，下次请求依然使用该时间戳"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:z,props:{id:n},children:[{type:b,tag:f,props:{ariaHidden:g,href:"#%E7%9C%8B%E4%BC%BC%E7%AE%80%E5%8D%95%EF%BC%8C%E5%85%B6%E5%AE%9E%E4%B8%8D%E6%98%93%E3%80%82",tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:n}]},{type:a,value:c},{type:b,tag:"adsbygoogle",props:{},children:[{type:a,value:c}]}]},dir:"\u002Fzh\u002Fmind\u002Fthinking",path:"\u002Fzh\u002Fmind\u002Fthinking\u002Fshit",extension:".md",createdAt:A,updatedAt:A,to:"\u002Fmind\u002Fthinking\u002Fshit"},prev:{title:"问题处理能力",path:"\u002Fzh\u002Fmind\u002Fcapability\u002Fsolving",to:"\u002Fmind\u002Fcapability\u002Fsolving"},next:{title:"辩证思维",path:"\u002Fzh\u002Fmind\u002Fthinking\u002Fdialectical",to:"\u002Fmind\u002Fthinking\u002Fdialectical"}}],fetch:{},mutations:[]}}("text","element","\n","p","li","a","true",-1,"span","icon","icon-link","开发忽略细节，代码一坨屎；设计忽略细节，产品一坨屎。",3,"看似简单，其实不易。","h3","ol",2,"0-消息表说明","0. 消息表说明","1-参数带入时间戳","1. 参数带入时间戳","2-阻止请求","2. 阻止请求","3-时间戳的有效性","3. 时间戳的有效性","h2","2021-09-01T00:54:35.492Z")));